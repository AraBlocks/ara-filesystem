#!/bin/bash

for repo in ara-crypto ara-identity ara-network ara-network-node-identity-archiver ara-network-node-identity-resolver; do
	echo -ne "Cloning ${repo}...\033[0K\r"
	git clone git@github.com:AraBlocks/${repo}.git --quiet  > "/dev/null" 2>&1
	cd ${repo}
	echo -ne "Installing ${repo}...\033[0K\r"
	npm install --silent  > "/dev/null" 2>&1
	npm link --silent > "/dev/null" 2>&1
	cd ../ara-filesystem
	echo -ne "Linking ${repo}...\033[0K\r"
	npm link ${repo} --silent  > "/dev/null" 2>&1
	cd ..
done

echo -ne "Creating ARA Network Secrets for 'archiver' and 'resolver'\033[0K\r"
ans -k archiver
ans -k resolver

echo "Archiving identity through ARA Archiver%\033[0K\r"
aid create --archive -k archiver

echo -ne "Opening 'truffle develop', enter 'migrate' once it has loaded\033[0K\r"

cd ara-filesystem

truffle develop
